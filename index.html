<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- <link rel="stylesheet" href="css/reset.css"> -->
    <link rel="stylesheet" href="css/main.css">
    
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <!-- Josefin Sans -->
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">
    <!-- Josefin Slab -->
    <link href="https://fonts.googleapis.com/css2?family=Josefin+Slab:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&display=swap" rel="stylesheet">

    <!-- Import Font Awesome -->
    <script src="https://kit.fontawesome.com/65f54478f1.js" crossorigin="anonymous"></script>

    <title>Hey Foodie!</title>

    <!-- title icon -->
    <link rel="shortcut icon" href="images/logo.svg" type="image/svg+xml">
</head>
<body id="bg">
  <main id="app">

    <!-- PART I: Login -->
    <section v-if="hasLogin === false" class="grid-container">
      <h1 class="hidden">Hey Foodie!</h1>
      <!-- Hey Foodie Logo -->
      <div id="login-form">
        <img src="../images/logo.png" alt="Hey Foodies Logo">
        <h2>Foodies Chat</h2>
        <input v-model="username" type="text" id="nname" name="nickname" placeholder="Nickname">
        <div class="select">
          <select name="slct" id="slct" required>
            <option value="0" selected disabled>Favourite Food</option>
            <option value="1">Pizza</option>
            <option value="2">Taco</option>
            <option value="3">Hamburger</option>
            <option value="4">Soup</option>
            <option value="5">Noodles</option>
            <option value="6">Bread</option>
            <option value="7">Rice</option>
            <option value="8">Eggs</option>
            <option value="9">Ice Cream</option>
            <option value="10">Cake</option>
          </select>
        </div> 
        <a href="" class="button" @click.prevent="clickJoinBtn">Join</a>
      </div>
      <p class="copyright">&copy; 2021 Shan-Li Wang All Rights Reserved.</p>
    </section>

    <!-- PART II: Chat -->
    <section v-else id="chat">
      <section class="display-logo">
        <img id="chat-logo" src="../images/logo.png" alt="Hey Foodies Logo">
        <h2 id="chat-h2">Foodies Chat</h2>
      </section>

      <section class="display-avatar">
        <displayavatar v-for="(val, key) in usersDict" :username="val[0]" :avatar="val[1]" :key="key"></displayavatar>
      </section>

      <!-- vue custom message component goes here -->
      <section class="messages">
        <ul id="messages" v-for="message in messages">
          <newmessage :msg="message" :socketid="socketID"></newmessage>
          <newavatar :msg="message" :socketid="socketID"></newavatar>
        </ul>
      </section>

      <section class="message-wrapper">
        <textarea @keyup.enter="triggerSubmitByEnter" @click.prevent="clickInputArea" v-model="message" class="text-message" placeholder="Start your message here... you can also press ENTER to send !"></textarea>
        <submitbtn :key="message" :msg="message" :username="username" @dispatchmsg="dispatchMessage"></submitbtn>
        <emojibtn @addemojitomessage="updateMessage"></emojibtn>
      </section>
    </section>
  
  </main>

  <!-- <script defer type="module" src="scripts/login.js"></script> -->
  <script src="/socket.io/socket.io.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/emoji-button@latest/dist/index.min.js"></script>
  <script defer type="module" src="scripts/main.js"></script>

</body>
</html>